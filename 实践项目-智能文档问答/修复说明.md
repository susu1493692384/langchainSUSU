# ğŸ”§ GUIç•Œé¢ä¿®å¤è¯´æ˜

## é—®é¢˜æè¿°æ±‡æ€»

åœ¨è¿è¡Œæ™ºèƒ½æ–‡æ¡£é—®ç­”ç³»ç»ŸGUIç‰ˆæœ¬æ—¶é‡åˆ°å¤šä¸ªé”™è¯¯ï¼š

### é”™è¯¯1: å ä½ç¬¦æ–‡æœ¬é—®é¢˜
```
ValueError: ['placeholder_text'] are not supported arguments. Look at the documentation for supported arguments.
```

### é”™è¯¯2: æ»‘å—å˜é‡ç±»å‹é”™è¯¯
```
TypeError: '>' not supported between instances of 'str' and 'float'
```

### é”™è¯¯3: æ–‡æœ¬æ¡†é«˜åº¦ä¸ºNoneé”™è¯¯
```
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float'
```

## æ ¹æœ¬åŸå› åˆ†æ

1. **CustomTkinter APIå…¼å®¹æ€§**: æŸäº›å‚æ•°åœ¨ä¸åŒç‰ˆæœ¬ä¸­æ”¯æŒä¸åŒ
2. **å˜é‡ç±»å‹ä¸åŒ¹é…**: tk.StringVar vs tk.DoubleVar/IntVar
3. **ç»„ä»¶å‚æ•°éªŒè¯**: æŸäº›ç»„ä»¶å‚æ•°ä¸èƒ½ä¸ºNoneå€¼

## å·²ä¿®å¤çš„é—®é¢˜

### 1. å ä½ç¬¦æ–‡æœ¬é—®é¢˜
- **é—®é¢˜**: `placeholder_text`å‚æ•°ä¸è¢«æ”¯æŒ
- **ä¿®å¤**: ä½¿ç”¨æ‰‹åŠ¨æ’å…¥å’Œäº‹ä»¶å¤„ç†æ–¹å¼
- **ä»£ç å˜æ›´**:
  ```python
  # åŸä»£ç 
  self.question_input = ctk.CTkTextbox(
      input_frame,
      height=80,
      font=self.normal_font,
      placeholder_text="è¯·è¾“å…¥æ‚¨çš„é—®é¢˜..."  # âŒ ä¸æ”¯æŒ
  )

  # ä¿®å¤å
  self.question_input = ctk.CTkTextbox(
      input_frame,
      height=80,
      font=self.normal_font
  )
  # æ·»åŠ æç¤ºæ–‡æœ¬
  self.question_input.insert("1.0", "è¯·è¾“å…¥æ‚¨çš„é—®é¢˜...")
  self.question_input.bind("<FocusIn>", self.clear_placeholder)
  ```

### 2. äº‹ä»¶å¤„ç†æ–¹æ³•
- **æ–°å¢**: `clear_placeholder()` æ–¹æ³•
- **åŠŸèƒ½**: å¤„ç†å ä½ç¬¦æ–‡æœ¬çš„æ¸…é™¤å’Œæ¢å¤

### 3. æ»‘å—å˜é‡ç±»å‹é”™è¯¯
- **é—®é¢˜**: æ»‘å—ä½¿ç”¨äº†StringVarå¯¼è‡´ç±»å‹ä¸åŒ¹é…
- **ä¿®å¤**: ä½¿ç”¨æ­£ç¡®çš„DoubleVarç±»å‹
- **ä»£ç å˜æ›´**:
  ```python
  # åŸä»£ç 
  temp_var = tk.StringVar(value="0.7")  # âŒ å­—ç¬¦ä¸²ç±»å‹

  # ä¿®å¤å
  temp_var = tk.DoubleVar(value=0.7)  # âœ… æµ®ç‚¹æ•°ç±»å‹
  ```

### 4. æ–‡æœ¬æ¡†é«˜åº¦ä¸ºNoneé”™è¯¯
- **é—®é¢˜**: CTkTextboxçš„heightå‚æ•°ä¸ºNoneå¯¼è‡´è®¡ç®—é”™è¯¯
- **ä¿®å¤**: è®¾ç½®å›ºå®šçš„é«˜åº¦å€¼
- **ä»£ç å˜æ›´**:
  ```python
  # åŸä»£ç 
  msg_content = ctk.CTkTextbox(
      message_frame,
      height=None,  # âŒ ä¸èƒ½ä¸ºNone
      font=self.normal_font
  )

  # ä¿®å¤å
  msg_content = ctk.CTkTextbox(
      message_frame,
      height=60,   # âœ… å›ºå®šé«˜åº¦
      font=self.normal_font
  )
  ```

### 5. å˜é‡ç±»å‹ç»Ÿä¸€é—®é¢˜
- **é—®é¢˜**: è®¾ç½®çª—å£ä¸­ä½¿ç”¨äº†é”™è¯¯çš„å˜é‡ç±»å‹
- **ä¿®å¤**: æ ¹æ®æ•°æ®ç±»å‹ä½¿ç”¨æ­£ç¡®çš„Var
- **ä»£ç å˜æ›´**:
  ```python
  # åŸä»£ç 
  nodes_var = tk.StringVar(value="50")        # âŒ æ•´æ•°ç”¨å­—ç¬¦ä¸²
  threshold_var = tk.StringVar(value="0.3")   # âŒ æµ®ç‚¹ç”¨å­—ç¬¦ä¸²
  retrieve_var = tk.StringVar(value="3")       # âŒ æ•´æ•°ç”¨å­—ç¬¦ä¸²

  # ä¿®å¤å
  nodes_var = tk.IntVar(value=50)            # âœ… æ•´æ•°ç±»å‹
  threshold_var = tk.DoubleVar(value=0.3)     # âœ… æµ®ç‚¹ç±»å‹
  retrieve_var = tk.IntVar(value=3)          # âœ… æ•´æ•°ç±»å‹
  ```

### 6. å¯¹è¯å†å²å¯¼å‡ºé—®é¢˜
- **é—®é¢˜**: æ¶ˆæ¯ç±»å‹æ£€æŸ¥ä¸æ­£ç¡®
- **ä¿®å¤**: ä½¿ç”¨æ­£ç¡®çš„LangChainæ¶ˆæ¯ç±»å‹
- **ä»£ç å˜æ›´**:
  ```python
  # ä¿®å¤å
  from langchain_core.messages import HumanMessage, AIMessage
  if isinstance(message, HumanMessage):
      f.write(f"[ç”¨æˆ·] {message.content}\n\n")
  elif isinstance(message, AIMessage):
      f.write(f"[AIåŠ©æ‰‹] {message.content}\n\n")
  ```

## æµ‹è¯•æ–‡ä»¶

åˆ›å»ºäº†å¤šä¸ªæµ‹è¯•æ–‡ä»¶æ¥éªŒè¯ä¿®å¤ï¼š

1. **`test_simple_gui.py`**: ç®€åŒ–çš„GUIæµ‹è¯•
2. **`test_gui.py`**: CustomTkinteråŸºç¡€åŠŸèƒ½æµ‹è¯•
3. **`start_gui.py`**: åŒ…å«ä¾èµ–æ£€æŸ¥çš„å¯åŠ¨å™¨

## ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1: ä½¿ç”¨å¯åŠ¨å™¨ï¼ˆæ¨èï¼‰
```bash
python start_gui.py
```

### æ–¹æ³•2: ç›´æ¥è¿è¡Œ
```bash
python document_qa_gui.py
```

### æ–¹æ³•3: å…ˆæµ‹è¯•GUIç»„ä»¶
```bash
python test_simple_gui.py
```

## å·²çŸ¥é™åˆ¶

1. **å ä½ç¬¦æ–‡æœ¬**: ä½¿ç”¨æ‰‹åŠ¨å®ç°è€ŒéåŸç”Ÿæ”¯æŒ
2. **æ–‡ä»¶å¯¹è¯æ¡†**: ä¾èµ–tkinterçš„filedialogå’Œmessagebox
3. **å­—ä½“æ”¯æŒ**: ä¾èµ–ç³»ç»Ÿå­—ä½“å®‰è£…

## å¦‚æœä»æœ‰é—®é¢˜

### 1. CustomTkinterç‰ˆæœ¬é—®é¢˜
```bash
pip install --upgrade customtkinter
```

### 2. å­—ä½“é—®é¢˜
å¦‚æœé‡åˆ°å­—ä½“é”™è¯¯ï¼Œä¿®æ”¹å­—ä½“è®¾ç½®ï¼š
```python
# æ›¿æ¢å¾®è½¯é›…é»‘ä¸ºç³»ç»Ÿå­—ä½“
self.title_font = ctk.CTkFont(family="Arial", size=24, weight="bold")
```

### 3. å¯¼å…¥é—®é¢˜
ç¡®ä¿æ‰€æœ‰ä¾èµ–æ­£ç¡®å®‰è£…ï¼š
```bash
python install_requirements.py
```

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **åˆ†å—å¤§å°**: å»ºè®®è®¾ç½®ä¸º300-500å­—ç¬¦
2. **è®°å¿†èŠ‚ç‚¹**: æ ¹æ®å†…å­˜å¤§å°è°ƒæ•´max_memory_nodes
3. **æ£€ç´¢æ•°é‡**: å»ºè®®è®¾ç½®ä¸º3-5ä¸ªæ–‡æ¡£

## æ›´æ–°æ—¥å¿—

- **v1.0.1**: ä¿®å¤å ä½ç¬¦æ–‡æœ¬å’Œæ¶ˆæ¯å¯¼å‡ºé—®é¢˜
- **v1.0.0**: åˆå§‹GUIç‰ˆæœ¬å‘å¸ƒ

---

## è”ç³»æ”¯æŒ

å¦‚æœä¿®å¤åä»æœ‰é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯ç¯å¢ƒ
3. æä¾›è¯¦ç»†çš„é”™è¯¯æŠ¥å‘Š

**ä¿®å¤å®Œæˆæ—¶é—´**: 2024å¹´12æœˆ2æ—¥