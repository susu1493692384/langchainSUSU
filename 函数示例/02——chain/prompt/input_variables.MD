 åœ¨prompté‡Œé¢inputå’Œè¿™ä¸ªinput_variablesæœ‰ä»€ä¹ˆåŒºåˆ« 
  â¿  â§‰ Selected 1 lines from 02_chains_modern.py in Visual Studio Code

â— ï¿½ğŸ” input_variables vs inputå‚æ•°è¯¦è§£è§£

  è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼è®©æˆ‘è¯¦ç»†è§£é‡Šè¿™ä¸¤ä¸ªå‚æ•°çš„åŒºåˆ«ã€‚

  ï¿½ğŸ“ input_variables åœ¨åœ¨ PromptTemplateä¸­ä¸­)

  # æ‚¨ä»£ç ç¬¬85-88è¡Œçš„ä¾‹å­
  translation_prompt = PromptTemplate(
      input_variables=["text"],  # è¿™é‡Œå®šä¹‰æ¨¡æ¿ä¸­çš„å˜é‡
      template="å°†ä»¥ä¸‹æ–‡æœ¬ç¿»è¯‘æˆè‹±æ–‡ï¼š\n{text}\n\nTranslationï¼š"
  )

  input_variables çš„ä½œç”¨ï¼š
  - ï¿½ï¿½ï¿½å£°æ˜æ¨¡æ¿å˜é‡ï¼šå‘Šè¯‰è¯‰PromptTemplatè¿™ä¸ªæ¨¡æ¿ä¸­æœ‰å“ªäº›å ä½ç¬¦ç¬¦
  - ï¿½ï¿½ï¿½å ä½ç¬¦åŒ¹é…ï¼šç¡®ä¿ä¿ templateä¸­çš„çš„ {text}æœ‰å¯¹åº”çš„è¾“å…¥å˜é‡é‡
  - âœ… å‚æ•°éªŒè¯ï¼šè°ƒç”¨æ—¶ä¼šæ£€æŸ¥æ˜¯å¦æä¾›äº†æ‰€æœ‰å¿…éœ€çš„å˜é‡

  ï¿½ğŸ¯ input åœ¨åœ¨ invokeæ–¹æ³•ä¸­ä¸­)

  # æ‚¨ä»£ç ç¬¬105è¡Œçš„ä¾‹å­
  results = parallel_chain.invoke({"text": test_text})
  #                                   â†‘
  #                                è¿™ä¸ªæ˜¯inputå‚æ•°

  input å‚æ•°çš„ä½œç”¨ï¼š
  - ï¿½ï¿½ï¿½å®é™…æ•°æ®ï¼šæä¾›æ¨¡æ¿ä¸­å ä½ç¬¦è¦æ›¿æ¢çš„å…·ä½“å€¼å€¼
  - ï¿½ï¿½ï¿½å­—å…¸æ ¼å¼ï¼šé”®åå¿…é¡»ä¸ä¸ input_variablesä¸­å£°æ˜çš„å˜é‡ååŒ¹é…é…
  - ï¿½ï¿½ï¿½åŠ¨æ€ä¼ å…¥ï¼šæ¯æ¬¡è°ƒç”¨æ—¶å¯ä»¥æä¾›ä¸åŒçš„æ•°æ®æ®

  ï¿½ğŸ”„å®Œæ•´çš„æ•°æ®æµæµ

  è®©æˆ‘ç”¨ä¸€ä¸ªç®€å•ä¾‹å­å±•ç¤ºå®Œæ•´æµç¨‹ï¼š

  # 1. å®šä¹‰æ¨¡æ¿ - å£°æ˜éœ€è¦çš„å˜é‡
  prompt = PromptTemplate(
      input_variables=["name", "age"],  # å£°æ˜éœ€è¦ä¸¤ä¸ªå˜é‡
      template="å§“åï¼š{name}ï¼Œå¹´é¾„ï¼š{age}"  # æ¨¡æ¿ä¸­æœ‰ä¸¤ä¸ªå ä½ç¬¦
  )

  # 2. åˆ›å»ºé“¾
  chain = prompt | llm | output_parser

  # 3. è°ƒç”¨æ—¶æä¾›å®é™…æ•°æ®
  result = chain.invoke({
      "name": "å¼ ä¸‰",    # è¿™ä¸ªinputå¡«å……{name}å ä½ç¬¦
      "age": "25"        # è¿™ä¸ªinputå¡«å……{age}å ä½ç¬¦  
  })

  ï¿½ğŸ¯ä¸¤è€…å…³ç³»å›¾å›¾

  input_variables = ["text"]      â† å£°æ˜ï¼šæ¨¡æ¿éœ€è¦å˜é‡
           â†“
  template = "ç¿»è¯‘{text}"         â† æ¨¡æ¿ï¼šå®šä¹‰å ä½ç¬¦ä½ç½®
           â†“
  chain.invoke({"text": "ä½ å¥½"})  â† è¾“å…¥ï¼šæä¾›å®é™…æ•°æ®

  ï¿½ğŸš€æ›´å¤æ‚çš„ä¾‹å­å­

  # å¤šå˜é‡æ¨¡æ¿
  multi_prompt = PromptTemplate(
      input_variables=["topic", "style", "length"],  # å£°æ˜3ä¸ªå˜é‡
      template="""
      å†™ä¸€ç¯‡å…³äº{topic}çš„æ–‡ç« ï¼Œ
      é£æ ¼ï¼š{style}ï¼Œ
      é•¿åº¦ï¼š{length}å­—å·¦å³ã€‚
      """
  )

  # è°ƒç”¨æ—¶æä¾›å¯¹åº”çš„è¾“å…¥
  result1 = multi_prompt.invoke({
      "topic": "äººå·¥æ™ºèƒ½",     # å¡«å…… {topic}
      "style": "å­¦æœ¯",        # å¡«å…… {style}  
      "length": "500"         # å¡«å…… {length}
  })

  result2 = multi_prompt.invoke({
      "topic": "ç¾é£Ÿ",        # ä¸åŒçš„topic
      "style": "è½»æ¾",        # ä¸åŒçš„style
      "length": "300"         # ä¸åŒçš„length
  })

  âš ï¸ å¸¸è§é”™è¯¯

  1. å˜é‡ä¸åŒ¹é…

  # âŒ é”™è¯¯ï¼šæ¨¡æ¿ä¸­çš„å˜é‡å’Œinput_variablesä¸åŒ¹é…
  prompt = PromptTemplate(
      input_variables=["name"],  # åªå£°æ˜äº†name
      template="å§“åï¼š{name}ï¼Œå¹´é¾„ï¼š{age}"  # ä½†æ¨¡æ¿ä¸­æœ‰age
  )

  2. è¾“å…¥ç¼ºå°‘å˜é‡

  # âŒ é”™è¯¯ï¼šinvokeæ—¶ç¼ºå°‘å¿…éœ€çš„å˜é‡
  chain.invoke({"name": "å¼ ä¸‰"})  # ç¼ºå°‘ageå˜é‡

  3. å˜é‡åä¸åŒ¹é…

  # âŒ é”™è¯¯ï¼šå˜é‡åå¤§å°å†™æˆ–æ‹¼å†™ä¸åŒ¹é…
  chain.invoke({"Name": "å¼ ä¸‰", "Age": 25})  # åº”è¯¥æ˜¯"name"å’Œ"age"

  ï¿½ğŸ“–æ ¸å¿ƒæ€»ç»“ç»“

  | å‚æ•°              | ä½œç”¨     | æ—¶æœº                | ç¤ºä¾‹                           |
  |-----------------|--------|-------------------|------------------------------|
  | input_variables | å£°æ˜æ¨¡æ¿å˜é‡ | å®šä¹‰PromptTemplateæ—¶ | ["text", "name"]             |
  | input           | æä¾›å®é™…æ•°æ® | invokeè°ƒç”¨æ—¶         | {"text": "ä½ å¥½", "name": "å¼ ä¸‰"} |

  è®°å¿†æŠ€å·§ï¼š

  - input_variables = å˜é‡å£°æ˜ (æˆ‘è¦ä»€ä¹ˆ)
  - input = å˜é‡èµ‹å€¼ (ç»™ä½ ä»€ä¹ˆ)

  è¿™æ ·å°±æ¸…æ¥šäº†å—ï¼Ÿinput_variables å°±åƒæ˜¯å‡½æ•°çš„å‚æ•°å£°æ˜ï¼Œè€Œ input å°±æ˜¯è°ƒç”¨å‡½æ•°æ—¶ä¼ é€’çš„å®é™…å‚æ•°ï¼